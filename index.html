<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bibliothèque Pyrénéenne</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <h1>Bibliothèque Pyrénéenne</h1>
    
    <div class="library-management">
        <div class="current-library">
            <span>Bibliothèque actuelle : </span>
            <span id="currentLibraryName" class="library-name">Aucune</span>
        </div>
        <div class="library-controls">
            <select id="librarySelect">
                <option value="">-- Choisir une bibliothèque --</option>
            </select>
            <button id="newLibraryBtn">Nouvelle bibliothèque</button>
            <button id="renameLibraryBtn">Renommer</button>
            <button id="deleteLibraryBtn">Supprimer</button>
        </div>
    </div>
    
    <div class="search-container">
        <input type="text" id="searchInput" placeholder="Rechercher un livre...">
    </div>
    
    <div class="controls" id="mainControls">
        <button id="addEntryBtn">Nouvelle entrée</button>
        <button id="exportBtn">Exporter les données</button>
        <button id="importBtn">Importer les données</button>
        <input type="file" id="importFile" accept=".json" class="file-input">
    </div>
    
    <div class="status-message" id="statusMessage"></div>
    
    <table id="bookTable">
        <thead>
            <tr>
                <th>N°</th>
                <th>Auteur</th>
                <th>Titre</th>
                <th>Description</th>
                <th>Photo</th>
                <th class="supprimer-column">Supprimer</th>
            </tr>
        </thead>
        <tbody id="bookTableBody">
            <!-- Les entrées de la bibliothèque seront ajoutées ici dynamiquement -->
        </tbody>
    </table>

    <!-- Modal pour afficher les images en grand -->
    <div id="imageModal" class="modal">
        <span class="close">&times;</span>
        <img class="modal-content" id="expandedImg">
    </div>

    <!-- Modal pour les dialogues de saisie -->
    <div id="dialogModal" class="dialog-modal">
        <div class="dialog-content">
            <div id="dialogTitle" class="dialog-title"></div>
            <input type="text" id="dialogInput" class="dialog-input">
            <div class="dialog-buttons">
                <button id="dialogCancel" class="dialog-btn dialog-btn-cancel">Annuler</button>
                <button id="dialogOk" class="dialog-btn dialog-btn-ok">OK</button>
            </div>
        </div>
    </div>

    <!-- Modal pour les détails du livre -->
    <div id="bookDetailModal" class="modal">
        <div class="detail-modal-content">
            <span class="close-detail">&times;</span>
            <h2 id="detailTitle">Détails du livre</h2>
            
            <div class="detail-container">
                <!-- Informations principales -->
                <div class="detail-section">
                    <h3>Informations principales</h3>
                    <div class="detail-field">
                        <label>Auteur:</label>
                        <div id="detailAuthor" class="editable-field" contenteditable="true"></div>
                    </div>
                    <div class="detail-field">
                        <label>Titre:</label>
                        <div id="detailMainTitle" class="editable-field" contenteditable="true"></div>
                    </div>
                    <div class="detail-field">
                        <label>Description sommaire:</label>
                        <div id="detailSummary" class="editable-field" contenteditable="true"></div>
                    </div>
                </div>
                
                <!-- Description étendue -->
                <div class="detail-section">
                    <h3>Description complète</h3>
                    <textarea id="detailExtendedDescription" class="detail-textarea" 
                            placeholder="Description détaillée du livre..."></textarea>
                </div>
                
                <!-- Informations supplémentaires -->
                <div class="detail-section">
                    <h3>Informations complémentaires</h3>
                    <div class="additional-info-grid">
                        <div class="detail-field">
                            <label>Éditeur:</label>
                            <input type="text" id="detailPublisher" class="detail-input">
                        </div>
                        <div class="detail-field">
                            <label>Année:</label>
                            <input type="number" id="detailYear" class="detail-input">
                        </div>
                        <div class="detail-field">
                            <label>ISBN:</label>
                            <input type="text" id="detailISBN" class="detail-input">
                        </div>
                        <div class="detail-field">
                            <label>Nombre de pages:</label>
                            <input type="number" id="detailPages" class="detail-input">
                        </div>
                    </div>
                </div>
                
                <!-- Galerie d'images -->
                <div class="detail-section">
                    <h3>Galerie d'images</h3>
                    <div id="imageGallery" class="image-gallery">
                        <!-- Les images seront ajoutées dynamiquement ici -->
                    </div>
                    <div class="image-upload-area">
                        <input type="file" id="multiImageInput" accept="image/*" multiple style="display: none;">
                        <button id="addImagesBtn" class="image-upload-btn">
                            <span>+</span> Ajouter des images
                        </button>
                        <div class="upload-hint">Glissez-déposez des images ici ou cliquez pour sélectionner</div>
                    </div>
                </div>
                
                <!-- Commentaires -->
                <div class="detail-section">
                    <h3>Commentaires et notes</h3>
                    <textarea id="detailComments" class="detail-textarea large" 
                            placeholder="Commentaires, notes personnelles..."></textarea>
                </div>
            </div>
            
            <div class="detail-actions">
                <button id="saveDetailsBtn" class="save-btn">Enregistrer</button>
                <button id="cancelDetailsBtn" class="cancel-btn">Annuler</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="scripts/utils.js"></script>
    <script src="scripts/library.js"></script>
    <script src="scripts/table.js"></script>
    <script src="scripts/detailModal.js"></script>
    <script src="scripts/main.js"></script>
</body>
</html>
